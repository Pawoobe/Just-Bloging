{% extends "layout.html" %}

{% block content %}

{% if form.errors %}
<p>IDㅏ 비밀번호가 일치하지 않습니다.</p>
{% endif %}

<form method="post" action="{% url 'login' %}">
{% csrf_token %}
<input type="hidden" name="next" value="" />

<button type="submit">로그인</button>
</form>

{% endblock %}


<!--
로그인 과정
form검증 : django는 로그인 절차에 AuthenticationForm 폼을 이용하며, 이 폼은 django.contrib.auth.forms 모듈에 있음.
AuthenticationForm 폼은 현재 이용자 정보와 HTTP요청 정보를 담은 request객체도 함께 인자로 전달받음. (세션필요)
폼 양식이 유효하면, (is_valid()) 이용자가 로그인 후에 이동한 URL문자열이 안전한지 검사한뒤 auth_login()함수를 이용해 로그인 인증처리하고 이동시킨다.
이 폼의 clean() 메소드에서 입력받은 내용을 토대로 authenticate() 함수를 이용해 인증을 시도한다. 일치하는 사용자가 없을시, 오류 일으키고 안내문을 발송한다.
일치하는 사용자가 있을시, 이 이용자 계정이 활성화 된 상태인지 is_active 검사하는걸로 폼안에서 처리하는 인증과정을 마친다.

인증체계기반으로 처리: authenticate() settings.py 의 AUTHENTICATION_BACKENDS 항목에 등록된 인증체계 기반 클래스를 하나씩 가져와서 authenticate()메소드를 호출하여
하나씩 인증을 시도한다. settings.py 파일에 따로 항목을 설정하지 않아도 문제가 없는건 django에 기본 내장 global_settings.py에 이항목이 설정되어 있기 대문이다
데이터베이스에서 로그인사용자 정보로 이용자를 찾는과정이 이 단계에서 이뤄진다 . 모델을 가져옴 -> 모델을 이용해 username으로 먼저 이용자 데이터 가져옴 -> 이 이용자 데이터에 저장된 비밀번호와  로그인하며 제출한 password를 비교한다.
비민번호까지 일치하면 이용자 모델로 생성한 인스턴스 객체를 반환하며, 아니면, None를 반환한다.

이용자모델 가져오기 : 인증체계기반을 django에서 기본하는 ModelBackend 기본인증을 다른것으로 갈아끼우거나 추가한다면 이용자 정보를 데이터 베이스에서 다루는 이용자 모델도 대체 하여 쓸수 있음.

username (unique=True), password (PasswordField), first_name / last_name (CharField), email (EmailField), is_staff / 관리자 is_active 활성화 된 계정 (BooleanField)

-->
